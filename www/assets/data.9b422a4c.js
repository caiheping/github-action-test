var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,r=(e,a)=>{for(var t in a||(a={}))o.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))s.call(a,t)&&n(e,t,a[t]);return e};import{g as d,l as c}from"./type.e2f5de7b.js";import{_ as i,g as u,s as p,l as m,u as f,a as b,d as v,b as g}from"./index.b7715d33.js";import{b as y,m as h,a as S}from"./index.b4c50d36.js";import{u as C}from"./useDrawer.8fe26ed9.js";import{d as w,r as _,a as k,c as T,f as L,a3 as R,n as x,j as O,t as j,a2 as K,l as U,m as D,v as F,q as z,a0 as I,Q as V,A as P,O as q}from"./ant-design-vue.10f2c163.js";const A=[{title:"字典标签",dataIndex:"dictLabel",key:"dictLabel",align:"center"},{title:"字典键值",dataIndex:"dictValue",key:"dictValue",align:"center"},{title:"字典排序",dataIndex:"dictSort",key:"dictSort",align:"center"},{title:"状态",dataIndex:"status",key:"status",align:"center",slots:{customRender:"status"}},{title:"备注",dataIndex:"remark",key:"remark",align:"center"},{title:"创建时间",dataIndex:"createdAt",key:"createdAt",align:"center"},{title:"操作",key:"action",align:"center",slots:{customRender:"action"}}];var N=w({components:{FormSearch:i},setup(){const e=y(),l=_(),o=_([]),s=k([{type:"select",label:"字典类型",name:"dictType",value:void 0,placeholder:"请选择字典类型",normalizer:{value:"dictType",label:"dictName"},options:l},{type:"input",label:"字典标签",name:"dictLabel",value:"",placeholder:"请输入字典标签"},{type:"select",label:"状态",name:"status",value:void 0,placeholder:"请选择数据状态",normalizer:{value:"dictValue",label:"dictLabel"},options:o}]),n=k({pageNum:1,pageSize:10,dictLabel:"",dictType:"",status:""}),i=_([]),h=_({total:0,current:1,pageSize:10,showSizeChanger:!0,showTotal:e=>`共 ${e} 条`}),S=k({selectedRowKeys:[]}),w=T((()=>S.selectedRowKeys.length>0)),j=e=>{m(e).then((e=>{console.log(e),i.value=e.data.rows,h.value.total=e.data.count,S.selectedRowKeys=[]}))},K=_(),U=k({id:void 0,dictType:"",dictLabel:"",dictValue:"",dictSort:1,status:"1",remark:""}),{open:D,drawerTitle:F}=C();console.log(D);return L((async()=>{console.log(n),o.value=await u("sys_normal_disable"),console.log(o),d(e.params.id).then((e=>{n.dictType=e.data.dictType,s[0].value=e.data.dictType,console.log(n),j(n)})),c().then((e=>{l.value=e.data.rows}))})),z=r({queryParams:n,formFields:s,handleQuery:e=>{h.value.current=1,n.pageNum=h.value.current,n.dictType=e.dictType,n.dictLabel=e.dictLabel,n.status=e.status,j(n)},handleReset:e=>{s[0].value=void 0,x((()=>{n.dictLabel=e.dictLabel,n.status=e.status,s[0].value=n.dictType,j(n)}))},userList:i,columns:A,pagination:h,handleTableChange:e=>{h.value=e,n.pageNum=h.value.current,n.pageSize=h.value.pageSize,j(n)},selectDictLabel:p,statusOptions:o},R(S)),a(z,t({hasSelected:w,onSelectChange:e=>{console.log("selectedRowKeys changed: ",e),S.selectedRowKeys=e},typeOptions:l,open:D,drawerTitle:F,formState:U,labelCol:{span:6},wrapperCol:{span:18},rules:{dictName:[{required:!0,message:"字典名称不能为空",trigger:"blur"}],dictLabel:[{required:!0,message:"字典类型不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"change"}]},formRef:K,handleClose:()=>{U.id=void 0,K.value.resetFields(),console.log(K),D.value=!1},handleSubmit:()=>{console.log(U),K.value.validate().then((()=>{U.id?f(U).then((e=>{O.success(e.message),U.id=void 0,K.value.resetFields(),D.value=!1,j(n)})):b(U).then((e=>{O.success(e.message),U.id=void 0,K.value.resetFields(),D.value=!1,j(n)}))})).catch((e=>{console.log("error",e)}))},confirm:e=>{const a=e.id||S.selectedRowKeys;v(a).then((()=>{j(n),O.success("删除成功")}))},cancel:e=>{console.log(e),O.success("取消删除")},handleAdd:()=>{D.value=!0,F.value="添加字典",U.dictType=n.dictType},handleUpdate:e=>{g(e.id).then((e=>{D.value=!0,U.dictType=n.dictType,F.value="修改字典",x((()=>{Object.keys(U).forEach((a=>{U[a]=e.data[a]}))}))}))}}));var z},computed:r({},h(S,["loading"]))});const Q={class:"p-4"},E={class:"mb-3"},$=q("新增"),B=q(" 删除 "),G=q(" 修改 "),H=q(" 删除 "),J=q(" 确认 "),M=q("取消");N.render=function(e,a,t,l,o,s){const n=j("form-search"),r=j("a-button"),d=j("a-col"),c=j("a-popconfirm"),i=j("a-row"),u=j("a-table"),p=j("a-input"),m=j("a-form-item"),f=j("a-input-number"),b=j("a-radio-group"),v=j("a-textarea"),g=j("a-form"),y=j("a-drawer"),h=K("has-permi");return U(),D("div",Q,[F("div",E,[F(n,{formFields:e.formFields,onSearch:e.handleQuery,onReset:e.handleReset},null,8,["formFields","onSearch","onReset"])]),F(i,{gutter:10,class:"mb-2"},{default:z((()=>[I(F(d,null,{default:z((()=>[F(r,{color:"success",onClick:e.handleAdd},{default:z((()=>[$])),_:1},8,["onClick"])])),_:1},512),[[h,["system:dictData:add"]]]),I(F(d,null,{default:z((()=>[F(c,{title:"确定要删除选中数据吗？","ok-text":"确定","cancel-text":"取消",onConfirm:e.confirm,onCancel:e.cancel},{default:z((()=>[F(r,{disabled:!e.hasSelected,color:"error"},{default:z((()=>[B])),_:1},8,["disabled"])])),_:1},8,["onConfirm","onCancel"])])),_:1},512),[[h,["system:dictData:delete"]]])])),_:1}),F(u,{loading:e.loading,rowKey:"id","row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange},columns:e.columns,"data-source":e.userList,pagination:e.pagination,onChange:e.handleTableChange},{status:z((({record:a})=>[F("span",null,V(e.selectDictLabel(e.statusOptions,a.status)),1)])),action:z((({record:a})=>[F("span",null,[I(F(r,{type:"link",color:"success",class:"mr-3",onClick:t=>e.handleUpdate(a)},{default:z((()=>[G])),_:2},1032,["onClick"]),[[h,["system:dictData:update"]]]),F(c,{title:"确定要删除该数据吗？","ok-text":"确定","cancel-text":"取消",onConfirm:t=>e.confirm(a),onCancel:e.cancel},{default:z((()=>[I(F(r,{type:"link",color:"error"},{default:z((()=>[H])),_:1},512),[[h,["system:dictData:delete"]]])])),_:2},1032,["onConfirm","onCancel"])])])),_:1},8,["loading","row-selection","columns","data-source","pagination","onChange"]),F(y,{width:"50%",title:e.drawerTitle,placement:"right",visible:e.open,"onUpdate:visible":a[7]||(a[7]=a=>e.open=a),maskClosable:!1,onClose:e.handleClose},{default:z((()=>[e.open?(U(),D(g,{key:0,ref:"formRef",model:e.formState,rules:e.rules,"label-col":e.labelCol,"wrapper-col":e.wrapperCol},{default:z((()=>[F(i,null,{default:z((()=>[F(d,{span:12},{default:z((()=>[F(m,{label:"字典类型",name:"dictType"},{default:z((()=>[F(p,{disabled:"",value:e.formState.dictType,"onUpdate:value":a[1]||(a[1]=a=>e.formState.dictType=a),placeholder:"请输入字典类型"},null,8,["value"])])),_:1})])),_:1}),F(d,{span:12},{default:z((()=>[F(m,{label:"字典标签",name:"dictLabel"},{default:z((()=>[F(p,{value:e.formState.dictLabel,"onUpdate:value":a[2]||(a[2]=a=>e.formState.dictLabel=a),placeholder:"请输入字典标签"},null,8,["value"])])),_:1})])),_:1}),F(d,{span:12},{default:z((()=>[F(m,{label:"字典键值",name:"dictValue"},{default:z((()=>[F(p,{value:e.formState.dictValue,"onUpdate:value":a[3]||(a[3]=a=>e.formState.dictValue=a),placeholder:"请输入字典键值"},null,8,["value"])])),_:1})])),_:1}),F(d,{span:12},{default:z((()=>[F(m,{label:"显示排序",name:"dictSort"},{default:z((()=>[F(f,{class:"!w-[100%]",value:e.formState.dictSort,"onUpdate:value":a[4]||(a[4]=a=>e.formState.dictSort=a),placeholder:"请输入显示排序"},null,8,["value"])])),_:1})])),_:1}),F(d,{span:12},{default:z((()=>[F(m,{label:"状态",name:"status"},{default:z((()=>[F(b,{value:e.formState.status,"onUpdate:value":a[5]||(a[5]=a=>e.formState.status=a),name:"menuType",options:[{label:"正常",value:"1"},{label:"停用",value:"0"}]},null,8,["value"])])),_:1})])),_:1}),F(d,{span:12},{default:z((()=>[F(m,{label:"备注",name:"remark"},{default:z((()=>[F(v,{rows:3,value:e.formState.remark,"onUpdate:value":a[6]||(a[6]=a=>e.formState.remark=a),placeholder:"请输入备注"},null,8,["value"])])),_:1})])),_:1}),F(d,{span:24},{default:z((()=>[F(m,null,{default:z((()=>[F(r,{type:"primary",class:"mr-3",onClick:e.handleSubmit},{default:z((()=>[J])),_:1},8,["onClick"]),F(r,{onClick:e.handleClose},{default:z((()=>[M])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules","label-col","wrapper-col"])):P("",!0)])),_:1},8,["title","visible","onClose"])])};export default N;
